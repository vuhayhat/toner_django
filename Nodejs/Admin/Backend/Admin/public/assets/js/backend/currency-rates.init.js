var perPage=10,editlist=!1,options={valueNames:["id","currencyName","usd","type","exchangeRate"],page:perPage,pagination:!0,plugins:[ListPagination({left:2,right:2})]},currencyRatesList=new List("currencyRatesList",options).on("updated",(function(e){0==e.matchingItems.length?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=1==e.i,n=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),n&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=perPage?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==perPage&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"})),idField=document.getElementById("id-field"),exchangeRateField=document.getElementById("exchangeRate-field"),currencyNameField=document.getElementById("currencyName-field"),typeField=document.getElementById("type-field"),currencyAmountField=document.getElementById("currencyAmount-field"),addBtn=document.getElementById("add-btn");editBtn=document.getElementById("edit-btn"),removeBtns=document.getElementsByClassName("remove-item-btn"),editBtns=document.getElementsByClassName("edit-item-btn"),refreshCallbacks();var typeVal=new Choices(typeField);document.getElementById("showModal").addEventListener("show.bs.modal",(function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Currency",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update Currency"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Currency",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Currency"):(document.getElementById("exampleModalLabel").innerHTML="List Currency",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")}));var count=12,forms=document.querySelectorAll(".tablelist-form");function refreshCallbacks(){removeBtns&&Array.from(removeBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[0].innerText,itemId=e.target.closest("tr").children[0].innerText;var t=currencyRatesList.get({id:itemId});Array.from(t).forEach((function(e){deleteid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=deleteid.body.firstElementChild;deleteid.body.firstElementChild.innerHTML==itemId&&document.getElementById("delete-record").addEventListener("click",(function(){currencyRatesList.remove("id",t.outerHTML),document.getElementById("deleteRecord-close").click(),Swal.fire({position:"center",icon:"success",title:"Currency Deleted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}))}))}))})),editBtns&&Array.from(editBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[0].innerText,itemId=e.target.closest("tr").children[0].innerText;var t=currencyRatesList.get({id:itemId});Array.from(t).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=isid.body.firstElementChild.innerHTML;if(t==itemId){editlist=!0,idField.value=t,exchangeRateField.value=e._values.usd,currencyNameField.value=e._values.currencyName,currencyAmountField.value=e._values.exchangeRate,typeVal&&typeVal.destroy(),typeVal=new Choices(typeField,{searchEnabled:!1}),val=(new DOMParser).parseFromString(e._values.type,"text/html");var n=val.body.innerHTML;typeVal.setChoiceByValue(n)}}))}))}))}Array.prototype.slice.call(forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault();var t,n=document.getElementById("alert-error-msg");if(n.classList.remove("d-none"),setTimeout((()=>n.classList.add("d-none")),2e3),""==exchangeRateField.value)return t="Please enter a customer name",n.innerHTML=t,!1;if(""==currencyNameField.value)return t="Please select a products",n.innerHTML=t,!1;if(""==typeField.value)return t="Please select a type value",n.innerHTML=t,!1;if(""==currencyAmountField.value)return t="Please select a delivery date",n.innerHTML=t,!1;if(""===exchangeRateField.value||""===currencyNameField.value||""===typeField.value||""===currencyAmountField.value||editlist){if(""!==exchangeRateField.value&&""!==currencyNameField.value&&""!==typeField.value&&""!==currencyAmountField.value&&editlist){var a=currencyRatesList.get({id:idField.value});Array.from(a).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html"),isid.body.firstElementChild.innerHTML==itemId&&e.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+idField.value+"</a>",usd:exchangeRateField.value,currencyName:currencyNameField.value,type:isType(typeField.value),exchangeRate:currencyAmountField.value})})),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),Swal.fire({position:"center",icon:"success",title:"Currency updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}}else currencyRatesList.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">${count}</a>`,usd:exchangeRateField.value,currencyName:currencyNameField.value,type:isType(typeField.value),exchangeRate:currencyAmountField.value}),currencyRatesList.sort("id",{order:"desc"}),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),refreshCallbacks(),count++,Swal.fire({position:"center",icon:"success",title:"Currency added successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});return!0}))}));const xhttp=new XMLHttpRequest;function isType(e){switch(e){case"Euro (€)":case"Yuan (¥)":case"AFN (؋)":case"CAD ($)":case"DKK (Kr)":case"EGP (E£)":case"CAD ($)":case"KES (K)":case"GBP (£)":case"COP ($)":return e}}function clearFields(){exchangeRateField.value="",currencyNameField.value="",currencyAmountField.value="",typeVal&&typeVal.destroy(),typeVal=new Choices(typeField)}xhttp.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach((function(e){currencyRatesList.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#TB${e.id}</a>`,currencyName:e.currencyName,usd:e.usd,type:isType(e.type),exchangeRate:e.exchangeRate}),currencyRatesList.sort("id",{order:"desc"}),refreshCallbacks()})),currencyRatesList.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#TB01</a>')},xhttp.open("GET","../assets/json/currency-rates.json"),xhttp.send(),document.getElementById("showModal").addEventListener("hidden.bs.modal",(function(){clearFields()})),document.querySelector(".pagination-next").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click())})),document.querySelector(".pagination-prev").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click())}));