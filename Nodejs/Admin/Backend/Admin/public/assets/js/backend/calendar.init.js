var start_date=document.getElementById("event-start-date"),date_range=null,T_check=null;function flatPickrInit(){flatpickr(start_date,{enableTime:!1,mode:"range",minDate:"today",onChange:function(e,t,n){t.split("to")}})}function flatpicekrValueClear(){start_date.flatpickr().clear()}function eventClicked(){document.getElementById("form-event").classList.add("view-event"),document.getElementById("event-title").classList.replace("d-block","d-none"),document.getElementById("event-category").classList.replace("d-block","d-none"),document.getElementById("event-start-date").parentNode.classList.add("d-none"),document.getElementById("event-start-date").classList.replace("d-block","d-none"),document.getElementById("event-location").classList.replace("d-block","d-none"),document.getElementById("event-payment").classList.replace("d-block","d-none"),document.getElementById("event-description").classList.replace("d-block","d-none"),document.getElementById("event-start-date-tag").classList.replace("d-none","d-block"),document.getElementById("event-payment-tag").classList.replace("d-none","d-block"),document.getElementById("event-location-tag").classList.replace("d-none","d-block"),document.getElementById("event-description-tag").classList.replace("d-none","d-block"),document.getElementById("btn-save-event").setAttribute("hidden",!0)}function editEvent(e){var t=e.getAttribute("data-id");"new-event"==t?(document.getElementById("modal-title").innerHTML="",document.getElementById("modal-title").innerHTML="Add Order",document.getElementById("btn-save-event").innerHTML="Add Order",eventTyped()):"edit-event"==t?(e.innerHTML="Cancel",e.setAttribute("data-id","cancel-event"),document.getElementById("btn-save-event").innerHTML="Update Order",e.removeAttribute("hidden"),eventTyped()):(e.innerHTML="Edit",e.setAttribute("data-id","edit-event"),eventClicked())}function eventTyped(){document.getElementById("form-event").classList.remove("view-event"),document.getElementById("event-title").classList.replace("d-none","d-block"),document.getElementById("event-category").classList.replace("d-none","d-block"),document.getElementById("event-start-date").parentNode.classList.remove("d-none"),document.getElementById("event-start-date").classList.replace("d-none","d-block"),document.getElementById("event-location").classList.replace("d-none","d-block"),document.getElementById("event-payment").classList.replace("d-none","d-block"),document.getElementById("event-description").classList.replace("d-none","d-block"),document.getElementById("event-start-date-tag").classList.replace("d-block","d-none"),document.getElementById("event-payment-tag").classList.replace("d-block","d-none"),document.getElementById("event-location-tag").classList.replace("d-block","d-none"),document.getElementById("event-description-tag").classList.replace("d-block","d-none"),document.getElementById("btn-save-event").removeAttribute("hidden")}function upcomingEvent(e){e.sort((function(e,t){return new Date(e.start)-new Date(t.start)})),document.getElementById("upcoming-event-list").innerHTML=null,Array.from(e).forEach((function(e){var t=e.title;if(e.end){endUpdatedDay=new Date(e.end);var n=endUpdatedDay.setDate(endUpdatedDay.getDate()-1)}var a=n||void 0;if("Invalid Date"==a||null==a)a=null;else{const e=new Date(a).toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric"});a=new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).split(" ").join(" ")}(e.start?str_dt(e.start):null)===(n?str_dt(n):null)&&(a=null);var i=e.start;if("Invalid Date"===i||void 0===i)i=null;else{const e=new Date(i).toLocaleDateString("en",{year:"numeric",month:"numeric",day:"numeric"});i=new Date(e).toLocaleDateString("en-GB",{day:"numeric",month:"short",year:"numeric"}).split(" ").join(" ")}var d=a||i;e.description&&e.description;if(tConvert(getTime(e.start))==tConvert(getTime(n)));u_event='<div class="card">        <div class="card-body">            <div class="d-flex align-items-center mb-4">                <p class="mb-0 flex-grow-1">OrderID: <span class="fw-medium">#TBT8'+e.id+'</span></p>                <div class="flex-shrink-0">                    '+isStatus(e.status)+'                </div>            </div>            <h5 class="fs-16">'+t+'</h5>            <div class="d-flex justify-content-between align-items-center mb-0">                <p class="mb-0"><i class="bi bi-calendar2-check me-1 text-muted align-middle"></i>'+i+'</p>                <p class="mb-0"><i class="bi bi-box-seam me-1 text-muted align-middle"></i>'+d+"</p>            </div>        </div>    </div>",document.getElementById("upcoming-event-list").innerHTML+=u_event}))}function getTime(e){if(null!=(e=new Date(e)).getHours())return e.getHours()+":"+(e.getMinutes()?e.getMinutes():0)}function isStatus(e){switch(e){case"Delivered":return'<span class="badge bg-success-subtle text-success">'+e+"</span>";case"Shipped":return'<span class="badge bg-warning-subtle text-warning">'+e+"</span>";case"Cancelled":return'<span class="badge bg-danger-subtle text-danger">'+e+"</span>";default:return'<span class="badge bg-info-subtle text-info">'+e+"</span>"}}function tConvert(e){var t=e.split(":"),n=t[0],a=t[1],i=n>=12?"PM":"AM";return(n=(n%=12)||12)+":"+(a=a<10?"0"+a:a)+" "+i}document.addEventListener("DOMContentLoaded",(function(){flatPickrInit();var e=new bootstrap.Modal(document.getElementById("event-modal"),{keyboard:!1});document.getElementById("event-modal");var t=document.getElementById("modal-title"),n=document.getElementById("form-event"),a=null,i=document.getElementsByClassName("needs-validation"),d=new Date,l=d.getDate(),s=d.getMonth(),o=d.getFullYear(),r=[{id:1,title:"Alfred Hurst",start:"2023-01-04",location:"Atlanta, Georgia",allDay:!0,className:"bg-info-subtle",status:"New",payment:"354.99"},{id:2,title:"Tommy Carey",start:"2023-01-30",className:"bg-info-subtle",location:"Virginia Beach, Virginia",allDay:!0,status:"New",payment:"742.00"},{id:3,title:"Cassius Brock",start:"2023-02-21",className:"bg-info-subtle",location:"Sacramento, California",allDay:!0,status:"New",payment:"150.99"},{id:4,title:"Camilla Winters",start:"2023-03-08",className:"bg-info-subtle",location:"Fresno, California",allDay:!0,status:"New",payment:"96.26"},{id:5,title:"Gabrielle Holden",start:"2023-02-22",className:"bg-info-subtle",location:"El Paso, Texas",allDay:!0,status:"New",payment:"229.00"},{id:6,title:"Kristina Hooper",start:"2023-03-21",className:"bg-info-subtle",location:"Seattle, Washington",allDay:!0,status:"New",payment:"354.99"},{id:7,title:"Jacques Leon",start:"2023-03-22",className:"bg-info-subtle",location:"Fort Worth, Texas",allDay:!0,status:"New",payment:"120.00"},{id:8,title:"Theresa Crawford",start:"2023-04-07",className:"bg-info-subtle",location:"Atlanta, Georgia",allDay:!0,status:"New",payment:"81.99"},{id:9,title:"Alina Holland",start:"2023-04-16",className:"bg-info-subtle",location:"Portland, Oregon",allDay:!0,status:"New",payment:"209.99"},{id:10,title:"Edward Rogers",start:"2023-04-22",className:"bg-info-subtle",location:"Denver, Colorado",allDay:!0,status:"New",payment:"309.09"},{id:153,title:"Catherine Flores",start:new Date(o,s,1),className:"bg-success-subtle",location:"Charlotte, North Carolina",allDay:!0,status:"Delivered",extendedProps:{department:"All Day Event"},description:"An all-day event is an event that lasts an entire day or longer",payment:"126.99"},{id:136,title:"William Hendrix",start:new Date(o,s,l-5),end:new Date(o,s,l-2),allDay:!0,status:"New",className:"bg-info-subtle",location:"San Francisco, California",extendedProps:{department:"Long Event"},description:"Long Term Event means an incident that last longer than 12 hours.",payment:"211.99"},{id:999,title:"Joan Trimble",start:new Date(o,s,l+22,20,0),end:new Date(o,s,l+24,16,0),allDay:!0,status:"New",className:"bg-info-subtle",location:"Seattle, Washington",extendedProps:{department:"Meeting with Alexis"},description:"A meeting is a gathering of two or more people that has been convened for the purpose of achieving a common goal through verbal interaction, such as sharing information or reaching agreement.",payment:"260.04"},{id:991,title:"Emma Harper",start:new Date(o,s,l+4,16,0),end:new Date(o,s,l+9,16,0),allDay:!0,status:"New",className:"bg-info-subtle",location:"Las Vegas, Nevada",extendedProps:{department:"Repeating Event"},description:"A recurring or repeating event is simply any event that you will occur more than once on your calendar. ",payment:"354.99"},{id:112,title:"Michael Burks",start:new Date(o,s,l,12,30),allDay:!0,status:"Shipped",className:"bg-warning-subtle",location:"San Antonio, Texas",extendedProps:{department:"Meeting"},description:"Tell how to boost website traffic",payment:"94.69"},{id:113,title:"David McMillan",start:new Date(o,s,l+9),end:new Date(o,s,l+11),allDay:!0,status:"New",className:"bg-info-subtle",location:"Phoenix, Arizona",extendedProps:{department:"Lunch"},description:"Strategies for Creating Your Weekly Schedule",payment:"350.99"},{id:875,title:"Marian Blevins",start:new Date(o,s,l+1,19,0),allDay:!0,status:"Cancelled",className:"bg-danger-subtle",location:"Los Angeles, California",extendedProps:{department:"Birthday Party"},description:"Family slumber party â€“ Bring out the blankets and pillows and have a family slumber party! Play silly party games, share special snacks and wind down the fun with a special movie.",payment:"205.55"},{id:783,title:"Amy Krick",start:new Date(o,s,28),end:new Date(o,s,29),allDay:!0,status:"Shipped",className:"bg-warning-subtle",location:"Chicago, Illinois",payment:"154.28"},{id:456,title:"Ryan Simmons",start:new Date(o,s,l+23,20,0),end:new Date(o,s,l+24,16,0),allDay:!0,className:"bg-info-subtle",location:"Los Angeles, California",status:"New",extendedProps:{department:"Discussion"},description:"Tell how to boost website traffic",payment:"180.09"}],c=document.getElementById("calendar");function m(i){document.getElementById("form-event").reset(),document.getElementById("btn-delete-event").setAttribute("hidden",!0),e.show(),n.classList.remove("was-validated"),n.reset(),a=null,t.innerText="Add Order",newEventData=i,document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)}function u(){return window.innerWidth>=768&&window.innerWidth<1200?"timeGridWeek":window.innerWidth<=768?"listMonth":"dayGridMonth"}var v=new Choices("#event-category",{searchEnabled:!1}),g=new FullCalendar.Calendar(c,{timeZone:"local",editable:!0,droppable:!0,selectable:!0,navLinks:!0,initialView:u(),themeSystem:"bootstrap",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay,listMonth"},windowResize:function(e){var t=u();g.changeView(t)},eventResize:function(e){var t=r.findIndex((function(t){return t.id==e.event.id}));r[t]&&(r[t].title=e.event.title,r[t].start=e.event.start,r[t].end=e.event.end?e.event.end:null,r[t].allDay=e.event.allDay,r[t].className=e.event.classNames[0],r[t].description=e.event._def.extendedProps.description?e.event._def.extendedProps.description:"",r[t].location=e.event._def.extendedProps.location?e.event._def.extendedProps.location:""),upcomingEvent(r)},eventClick:function(i){document.getElementById("edit-event-btn").removeAttribute("hidden"),document.getElementById("btn-save-event").setAttribute("hidden",!0),document.getElementById("edit-event-btn").setAttribute("data-id","edit-event"),document.getElementById("edit-event-btn").innerHTML="Edit",eventClicked(),flatPickrInit(),flatpicekrValueClear(),e.show(),n.reset(),a=i.event,document.getElementById("modal-title").innerHTML="",document.getElementById("event-location-tag").innerHTML=void 0===a.extendedProps.location?"":a.extendedProps.location,document.getElementById("event-payment-tag").innerHTML=void 0===a.extendedProps.payment?"No Location":"$"+a.extendedProps.payment,document.getElementById("event-description-tag").innerHTML=void 0===a.extendedProps.description?"No Description":a.extendedProps.description,document.getElementById("event-title").value=a.title,document.getElementById("event-location").value=void 0===a.extendedProps.location?"No Location":a.extendedProps.location,document.getElementById("event-payment").value=void 0===a.extendedProps.payment?"":a.extendedProps.payment,document.getElementById("event-description").value=void 0===a.extendedProps.description?"No Description":a.extendedProps.description,document.getElementById("eventid").value=a.id,a.classNames[0]&&(v.destroy(),(v=new Choices("#event-category",{searchEnabled:!1})).setChoiceByValue(a.classNames[0]));var d=a.start,l=a.end,s=function(e){var t=new Date(e),n=""+(t.getMonth()+1),a=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[i,n,a].join("-")},o=null;if(null!=l){var r=new Date(l);o=r.setDate(r.getDate()-1)}var c=null==l?str_dt(d):str_dt(d)+" to "+str_dt(o),m=null==l?s(d):s(d)+" to "+s(o);flatpickr(start_date,{defaultDate:m,altInput:!0,altFormat:"j F Y",dateFormat:"Y-m-d",mode:"range",onChange:function(e,t,n){t.split("to")}}),document.getElementById("event-start-date-tag").innerHTML=c,newEventData=null,t.innerText=a.title,document.getElementById("btn-delete-event").removeAttribute("hidden")},dateClick:function(e){m(e)},events:r,eventContent:function(e){return"New"==e.event._def.extendedProps.status&&(e.event._def.ui.classNames=["bg-info-subtle"]),{html:'<div class="fc-event-title fc-sticky">#TBT8'+e.event.id+" - "+e.event.title+"</div>"}},eventReceive:function(e){var t={id:parseInt(e.event.id),title:e.event.title,start:e.event.start,allDay:e.event.allDay,className:e.event.classNames[0]};r.push(t),upcomingEvent(r)},eventDrop:function(e){var t=r.findIndex((function(t){return t.id==e.event.id}));r[t]&&(r[t].title=e.event.title,r[t].start=e.event.start,r[t].end=e.event.end?e.event.end:null,r[t].allDay=e.event.allDay,r[t].className=e.event.classNames[0],r[t].description=e.event._def.extendedProps.description?e.event._def.extendedProps.description:"",r[t].location=e.event._def.extendedProps.location?e.event._def.extendedProps.location:""),upcomingEvent(r)}});g.render(),upcomingEvent(r),n.addEventListener("submit",(function(t){t.preventDefault();var n=document.getElementById("event-title").value,d=document.getElementById("event-category").value,l=document.getElementById("event-start-date").value.split("to"),s=new Date(l[0].trim()),o=new Date(l[1]);o.setDate(o.getDate()+1);var c=null,m=document.getElementById("event-location").value,u=document.getElementById("event-payment").value,v=document.getElementById("event-description").value,p=document.getElementById("eventid").value,y=!1;if(l.length>1){(c=new Date(l[1])).setDate(c.getDate()+1),l=new Date(l[0]),y=!0}else{var b=l;l=new Date(l),c=new Date(b)}var f=r.length+1,E=l[1]?o:new Date(l);if(!1===i[0].checkValidity())i[0].classList.add("was-validated");else{if(a){a.setProp("id",p),a.setProp("title",n),a.setProp("classNames",[d]),a.setStart(s),a.setEnd(E),a.setAllDay(y),a.setExtendedProp("description",v),a.setExtendedProp("location",m),a.setExtendedProp("payment",u);var h=r.findIndex((function(e){return e.id==a.id}));r[h]&&(r[h].title=n,r[h].start=s,r[h].end=E,r[h].allDay=y,r[h].className=d,r[h].description=v,r[h].location=m,r[h].payment=u),g.render()}else{var w={id:f,title:n,start:l,end:c,allDay:y,className:d,description:v,location:m,payment:u};g.addEvent(w),r.push(w)}e.hide(),upcomingEvent(r)}})),document.getElementById("btn-delete-event").addEventListener("click",(function(t){if(a){for(var n=0;n<r.length;n++)r[n].id==a.id&&(r.splice(n,1),n--);upcomingEvent(r),a.remove(),a=null,e.hide()}})),document.getElementById("btn-new-event").addEventListener("click",(function(e){flatpicekrValueClear(),flatPickrInit(),m(),document.getElementById("edit-event-btn").setAttribute("data-id","new-event"),document.getElementById("edit-event-btn").click(),document.getElementById("edit-event-btn").setAttribute("hidden",!0)}));var p=document.getElementById("searchResultsList");p.addEventListener("keyup",(function(){var e,t=p.value.toLowerCase();upcomingEvent((e=t,r.filter((function(t){return-1!==t.title.toLowerCase().indexOf(e.toLowerCase())}))))}))}));var str_dt=function(e){var t=new Date(e),n=""+["January","February","March","April","May","June","July","August","September","October","November","December"][t.getMonth()],a=""+t.getDate(),i=t.getFullYear();return n.length<2&&(n="0"+n),a.length<2&&(a="0"+a),[a+" "+n,i].join(",")};