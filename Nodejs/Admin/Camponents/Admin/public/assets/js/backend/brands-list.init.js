var url="../assets/json/",brandList="",editList=!1,prevButton=document.getElementById("page-prev"),nextButton=document.getElementById("page-next"),currentPage=1,itemsPerPage=15,getJSON=function(e,t){var n=new XMLHttpRequest;n.open("GET",url+e,!0),n.responseType="json",n.onload=function(){var e=n.status;t(200===e?null:e,n.response)},n.send()};function loadBrandListData(e,t){var n=Math.ceil(e.length/itemsPerPage);t<1&&(t=1),t>n&&(t=n),document.getElementById("brand-list").innerHTML="";for(var a=(t-1)*itemsPerPage;a<t*itemsPerPage&&a<e.length;a++)document.getElementById("brand-list").innerHTML+='<div class="col">        <div class="card brand-widget card-animate">            <div class="card-body text-center pb-2">                <img src="'+e[a].companyLogo+'" alt="" class="brand-img">            </div>            <div class="card-footer text-center border-0">                <h6 class="fs-17">'+e[a].brandName+'</h6>                <p class="mb-0"><a href="#!" class="link-success stretched-link">'+e[a].productItems+" Items</a></p>            </div>        </div>    </div>";selectedPage(),1==currentPage?prevButton.parentNode.classList.add("disabled"):prevButton.parentNode.classList.remove("disabled"),currentPage==n?nextButton.parentNode.classList.add("disabled"):nextButton.parentNode.classList.remove("disabled")}getJSON("brand-list.json",(function(e,t){null!==e?console.log("Something went wrong: "+e):(loadBrandListData(brandList=t,currentPage),paginationEvents(),sortElementsById())})),document.querySelector("#brandLogo-image-input").addEventListener("change",(function(){var e=document.querySelector("#brandLogo-img"),t=document.querySelector("#brandLogo-image-input").files[0],n=new FileReader;n.addEventListener("load",(function(){e.src=n.result}),!1),t&&n.readAsDataURL(t)}));var brandLogoImg=document.getElementById("brandLogo-img"),brandNameVal=document.getElementById("brandName-input"),forms=document.querySelectorAll(".create-form");function selectedPage(){for(var e=document.getElementById("page-num").getElementsByClassName("clickPageNumber"),t=0;t<e.length;t++)t==currentPage-1?e[t].parentNode.classList.add("active"):e[t].parentNode.classList.remove("active")}function paginationEvents(){var e=function(){return Math.ceil(brandList.length/itemsPerPage)};prevButton.addEventListener("click",(function(){currentPage>1&&(currentPage--,loadBrandListData(brandList,currentPage))})),nextButton.addEventListener("click",(function(){currentPage<e()&&(currentPage++,loadBrandListData(brandList,currentPage))})),function(){var t=document.getElementById("page-num");t.innerHTML="";for(var n=1;n<e()+1;n++)t.innerHTML+="<div class='page-item'><a class='page-link clickPageNumber' href='javascript:void(0);'>"+n+"</a></div>"}(),document.addEventListener("click",(function(e){"A"==e.target.nodeName&&e.target.classList.contains("clickPageNumber")&&(currentPage=e.target.textContent,loadBrandListData(brandList,currentPage))})),selectedPage()}function fetchIdFromObj(e){return parseInt(e.id)}function findNextId(){if(0===brandList.length)return 0;var e=fetchIdFromObj(brandList[brandList.length-1]),t=fetchIdFromObj(brandList[0]);return t>=e?t+1:e+1}function sortElementsById(){loadBrandListData(brandList.sort((function(e,t){var n=fetchIdFromObj(e),a=fetchIdFromObj(t);return n>a?-1:n<a?1:0})),currentPage)}function clearFields(){document.getElementById("id-field").value="",brandLogoImg.src="",brandNameVal.value="",document.getElementById("brandLogo-image-input").value=""}function pageEvent(e){0==e.length?(document.getElementById("pagination-element").style.display="none",document.getElementById("noresult").classList.remove("d-none")):(document.getElementById("pagination-element").style.display="flex",document.getElementById("noresult").classList.add("d-none"));var t=document.getElementById("page-num");t.innerHTML="";for(var n=Math.ceil(e.length/itemsPerPage),a=1;a<n+1;a++)t.innerHTML+="<div class='page-item'><a class='page-link clickPageNumber' href='javascript:void(0);'>"+a+"</a></div>"}Array.prototype.slice.call(forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault();var t=document.getElementById("alert-error-msg");t.classList.remove("d-none"),setTimeout((()=>t.classList.add("d-none")),2e3);var n,a=window.location.href.split("#");if(brandLogoImg.src.split("#")[0]==a[0])return n="Please select a brand logo image",t.innerHTML=n,!1;if(""==brandNameVal.value)return n="Please enter a brand name",t.innerHTML=n,!1;if(a[0]&&""!==brandNameVal.value&&""!==brandLogoImg.value&&!editList){var r={id:findNextId(),brandName:brandNameVal.value,companyLogo:brandLogoImg.src,productItems:"0"};brandList.push(r),sortElementsById()}return pageEvent(brandList),loadBrandListData(brandList,currentPage),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("createModal-close").click(),!0}))})),document.getElementById("createModal").addEventListener("hidden.bs.modal",(e=>{clearFields()}));var searchInputList=document.getElementById("searchInputList");searchInputList.addEventListener("keyup",(function(){var e=searchInputList.value.toLowerCase();var t,n=(t=e,brandList.filter((function(e){return-1!==e.brandName.toLowerCase().indexOf(t.toLowerCase())})));pageEvent(n),loadBrandListData(n,currentPage)}));