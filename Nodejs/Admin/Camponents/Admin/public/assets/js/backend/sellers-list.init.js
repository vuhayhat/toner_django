var perPage=10,editlist=!1,options={valueNames:["id","sellerName","itemStock","balance","email","phone","createDate","accountStatus"],page:perPage,pagination:!0,plugins:[ListPagination({left:2,right:2})]},sellersList=new List("sellersList",options).on("updated",(function(e){0==e.matchingItems.length?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=1==e.i,l=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),l&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=perPage?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==perPage&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"}));const xhttp=new XMLHttpRequest;xhttp.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach((function(e){sellersList.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#TB${e.id}</a>`,sellerName:e.sellerName,itemStock:e.itemStock,balance:e.balance,email:e.email,phone:e.phone,createDate:e.createDate,accountStatus:isStatus(e.accountStatus)}),sellersList.sort("id",{order:"desc"}),refreshCallbacks()})),sellersList.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#TB01</a>')},xhttp.open("GET","../assets/json/sellers-list.json"),xhttp.send(),isCount=(new DOMParser).parseFromString(sellersList.items.slice(-1)[0]._values.id,"text/html");var isValue=isCount.body.firstElementChild.innerHTML;function isStatus(e){switch(e){case"Active":return'<span class="badge bg-success-subtle text-success  text-uppercase">'+e+"</span>";case"Inactive":return'<span class="badge bg-danger-subtle text-danger  text-uppercase">'+e+"</span>"}}var idField=document.getElementById("id-field"),sellerNameField=document.getElementById("seller-name-field"),itemStockField=document.getElementById("item-stock-field"),balanceField=document.getElementById("balance-field"),emailField=document.getElementById("email-field"),phoneField=document.getElementById("phone-field"),dateField=document.getElementById("date-field"),accountStatusField=document.getElementById("account-status-field"),addBtn=document.getElementById("add-btn"),editBtns=document.getElementsByClassName("edit-item-btn"),removeBtns=document.getElementsByClassName("remove-item-btn");refreshCallbacks();var accountStatusVal=new Choices(accountStatusField,{searchEnabled:!1});function refreshCallbacks(){removeBtns&&Array.from(removeBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=sellersList.get({id:itemId});Array.from(t).forEach((function(e){deleteid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=deleteid.body.firstElementChild;deleteid.body.firstElementChild.innerHTML==itemId&&document.getElementById("delete-record").addEventListener("click",(function(){sellersList.remove("id",t.outerHTML),document.getElementById("deleteRecord-close").click(),Swal.fire({position:"center",icon:"success",title:"User Deleted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}))}))}))})),editBtns&&Array.from(editBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=sellersList.get({id:itemId});Array.from(t).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=isid.body.firstElementChild.innerHTML;if(t==itemId){editlist=!0,idField.value=t,sellerNameField.value=e._values.sellerName,itemStockField.value=e._values.itemStock,balanceField.value=e._values.balance,emailField.value=e._values.email,phoneField.value=e._values.phone,dateField.value=e._values.createDate,accountStatusVal&&accountStatusVal.destroy(),accountStatusVal=new Choices(accountStatusField,{searchEnabled:!1});var l=(new DOMParser).parseFromString(e._values.accountStatus,"text/html").body.firstElementChild.innerHTML;accountStatusVal.setChoiceByValue(l),flatpickr("#date-field",{dateFormat:"d M, Y",defaultDate:e._values.createDate})}}))}))}))}document.getElementById("showModal").addEventListener("show.bs.modal",(function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit Seller",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add Seller",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add Seller"):(document.getElementById("exampleModalLabel").innerHTML="List Seller",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")}));var count=12,forms=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault();var t,l=document.getElementById("alert-error-msg");l.classList.remove("d-none"),setTimeout((()=>l.classList.add("d-none")),2e3);var a=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;if(""==sellerNameField.value)return t="Please enter a seller name",l.innerHTML=t,!1;if(""==itemStockField.value)return t="Please enter a item stock",l.innerHTML=t,!1;if(""==balanceField.value)return t="Please enter a balance ",l.innerHTML=t,!1;if(!emailField.value.match(a))return t="Please enter valid email address",l.innerHTML=t,!1;if(""==phoneField.value)return t="Please enter a phone number",l.innerHTML=t,!1;if(""==dateField.value)return t="Please select a date",l.innerHTML=t,!1;if(""==accountStatusField.value)return t="Please select a status",l.innerHTML=t,!1;if(""!==sellerNameField.value&&""!==itemStockField.value&&""!==balanceField.value&&emailField.value.match(a)&&""!==phoneField.value&&""!==dateField.value&&""!==accountStatusField.value&&!editlist)sellersList.add({id:'<a href="javascript:void(0);" class="fw-medium link-primary">#TB'+count+"</a>",sellerName:sellerNameField.value,itemStock:itemStockField.value,balance:"$"+balanceField.value,email:emailField.value,phone:phoneField.value,createDate:dateField.value,accountStatus:isStatus(accountStatusField.value)}),sellersList.sort("id",{order:"desc"}),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),refreshCallbacks(),count++,Swal.fire({position:"center",icon:"success",title:"Seller details added successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});else if(""!==sellerNameField.value&&""!==itemStockField.value&&""!==balanceField.value&&emailField.value.match(a)&&""!==phoneField.value&&""!==dateField.value&&""!==accountStatusField.value&&editlist){var i=sellersList.get({id:idField.value});Array.from(i).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html"),isid.body.firstElementChild.innerHTML==itemId&&e.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+idField.value+"</a>",sellerName:sellerNameField.value,itemStock:itemStockField.value,balance:balanceField.value,email:emailField.value,phone:phoneField.value,createDate:dateField.value,accountStatus:isStatus(accountStatusField.value)})})),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),Swal.fire({position:"center",icon:"success",title:"Seller details updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}return!0}))}));var statusInput=new Choices(document.getElementById("idStatus"),{searchEnabled:!1});function clearFields(){sellerNameField.value="",itemStockField.value="",balanceField.value="",emailField.value="",phoneField.value="",dateField.value="",accountStatusField.value="",flatpickr("#date-field").clear(),accountStatusVal&&accountStatusVal.destroy(),accountStatusVal=new Choices(accountStatusField)}statusInput.passedElement.element.addEventListener("change",(function(e){var t=e.detail.value;sellersList.filter((function(e){matchData=(new DOMParser).parseFromString(e.values().accountStatus,"text/html");var l=matchData.body.firstElementChild.innerHTML,a=!1;if(a="All"==l||"All"==t||l==t)return a})),sellersList.update()}),!1),document.getElementById("showModal").addEventListener("hidden.bs.modal",(function(){clearFields()})),document.querySelector(".pagination-next").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click())})),document.querySelector(".pagination-prev").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click())}));