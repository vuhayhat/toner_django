var perPage=10,editlist=!1,options={valueNames:["id","user_name","email_id","date","status"],page:perPage,pagination:!0,plugins:[ListPagination({left:2,right:2})]},usersList=new List("usersList",options).on("updated",(function(e){0==e.matchingItems.length?document.getElementsByClassName("noresult")[0].style.display="block":document.getElementsByClassName("noresult")[0].style.display="none";var t=1==e.i,s=e.i>e.matchingItems.length-e.page;document.querySelector(".pagination-prev.disabled")&&document.querySelector(".pagination-prev.disabled").classList.remove("disabled"),document.querySelector(".pagination-next.disabled")&&document.querySelector(".pagination-next.disabled").classList.remove("disabled"),t&&document.querySelector(".pagination-prev").classList.add("disabled"),s&&document.querySelector(".pagination-next").classList.add("disabled"),e.matchingItems.length<=perPage?document.querySelector(".pagination-wrap").style.display="none":document.querySelector(".pagination-wrap").style.display="flex",e.matchingItems.length==perPage&&document.querySelector(".pagination.listjs-pagination").firstElementChild.children[0].click(),e.matchingItems.length>0?document.getElementsByClassName("noresult")[0].style.display="none":document.getElementsByClassName("noresult")[0].style.display="block"})),idField=document.getElementById("id-field"),usersImg=document.getElementById("users-img-field"),userNameField=document.getElementById("user-name-field"),emailField=document.getElementById("email-field"),dateField=document.getElementById("date-field"),accountStatusField=document.getElementById("account-status-field"),addBtn=document.getElementById("add-btn");editBtn=document.getElementById("edit-btn"),editBtns=document.getElementsByClassName("edit-item-btn"),removeBtns=document.getElementsByClassName("remove-item-btn"),refreshCallbacks();var accountStatusVal=new Choices(accountStatusField,{searchEnabled:!1});function refreshCallbacks(){removeBtns&&Array.from(removeBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=usersList.get({id:itemId});Array.from(t).forEach((function(e){deleteid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=deleteid.body.firstElementChild;deleteid.body.firstElementChild.innerHTML==itemId&&document.getElementById("delete-record").addEventListener("click",(function(){usersList.remove("id",t.outerHTML),document.getElementById("deleteRecord-close").click(),Swal.fire({position:"center",icon:"success",title:"User Deleted successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}))}))}))})),editBtns&&Array.from(editBtns).forEach((function(e){e.addEventListener("click",(function(e){e.target.closest("tr").children[1].innerText,itemId=e.target.closest("tr").children[1].innerText;var t=usersList.get({id:itemId});Array.from(t).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html");var t=isid.body.firstElementChild.innerHTML;if(t==itemId){editlist=!0,idField.value=t;var s=(new DOMParser).parseFromString(e._values.user_name,"text/html"),a=s.body.querySelector(".user-profile-img").src;usersImg.src=a;var i=s.body.querySelector(".user_name").innerHTML;userNameField.value=i,emailField.value=e._values.email_id,dateField.value=e._values.date,accountStatusVal&&accountStatusVal.destroy(),accountStatusVal=new Choices(accountStatusField,{searchEnabled:!1}),val=(new DOMParser).parseFromString(e._values.status,"text/html");var n=val.body.firstElementChild.innerHTML;accountStatusVal.setChoiceByValue(n),flatpickr("#date-field",{dateFormat:"d M, Y",defaultDate:e._values.date})}}))}))}))}document.getElementById("showModal").addEventListener("show.bs.modal",(function(e){e.relatedTarget.classList.contains("edit-item-btn")?(document.getElementById("exampleModalLabel").innerHTML="Edit User",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Update"):e.relatedTarget.classList.contains("add-btn")?(document.getElementById("exampleModalLabel").innerHTML="Add User",document.getElementById("showModal").querySelector(".modal-footer").style.display="block",document.getElementById("add-btn").innerHTML="Add User"):(document.getElementById("exampleModalLabel").innerHTML="List User",document.getElementById("showModal").querySelector(".modal-footer").style.display="none")}));var count=11,forms=document.querySelectorAll(".tablelist-form");Array.prototype.slice.call(forms).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault();var t,s=document.getElementById("alert-error-msg");if(s.classList.remove("d-none"),setTimeout((()=>s.classList.add("d-none")),2e3),""==userNameField.value)return t="Please enter User name",s.innerHTML=t,!1;if(""==emailField.value)return t="Please enter User email",s.innerHTML=t,!1;if(""==dateField.value)return t="Please select a date",s.innerHTML=t,!1;if(""==accountStatusField.value)return t="Please select a account status",s.innerHTML=t,!1;if(""===userNameField.value||""===emailField.value||""===dateField.value||""===accountStatusField.value||editlist){if(""!==userNameField.value&&""!==emailField.value&&""!==dateField.value&&""!==accountStatusField.value&&editlist){var a=usersList.get({id:idField.value});Array.from(a).forEach((function(e){isid=(new DOMParser).parseFromString(e._values.id,"text/html"),isid.body.firstElementChild.innerHTML==itemId&&e.values({id:'<a href="javascript:void(0);" class="fw-medium link-primary">'+idField.value+"</a>",user_name:'<div class="d-flex align-items-center gap-2">                        <div class="flex-shrink-0"><img src="'+usersImg.src+'" alt="" class="avatar-xs rounded-circle user-profile-img"></div>                        <div class="flex-grow-1 ms-2 user_name">'+userNameField.value+"</div>                        </div>",email_id:emailField.value,date:dateField.value,status:isStatus(accountStatusField.value)})})),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),Swal.fire({position:"center",icon:"success",title:"User updated Successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0})}}else usersList.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">${count}</a>`,user_name:'<div class="d-flex align-items-center gap-2">                <div class="flex-shrink-0"><img src="'+usersImg.src+'" alt="" class="avatar-xs rounded-circle user-profile-img"></div>                <div class="flex-grow-1 ms-2 user_name">'+userNameField.value+"</div>                </div>",email_id:emailField.value,date:dateField.value,status:isStatus(accountStatusField.value)}),usersList.sort("id",{order:"desc"}),document.getElementById("alert-error-msg").classList.add("d-none"),document.getElementById("close-modal").click(),clearFields(),refreshCallbacks(),count++,Swal.fire({position:"center",icon:"success",title:"User added successfully!",showConfirmButton:!1,timer:2e3,showCloseButton:!0});return!0}))}));const xhttp=new XMLHttpRequest;xhttp.onload=function(){var e=JSON.parse(this.responseText);Array.from(e).forEach((function(e){usersList.add({id:`<a href="javascript:void(0);" class="fw-medium link-primary">#VZ${e.id}</a>`,user_name:'<div class="d-flex align-items-center gap-2">            <div class="flex-shrink-0"><img src="'+e.user_name[0]+'" alt="" class="avatar-xs rounded-circle user-profile-img"></div>            <div class="flex-grow-1 ms-2 user_name">'+e.user_name[1]+"</div>            </div>",email_id:e.email_id,date:e.date,status:isStatus(e.status)}),usersList.sort("id",{order:"desc"}),refreshCallbacks()})),usersList.remove("id",'<a href="javascript:void(0);" class="fw-medium link-primary">#VZ001</a>')},xhttp.open("GET","../assets/json/users-list.json"),xhttp.send(),isCount=(new DOMParser).parseFromString(usersList.items.slice(-1)[0]._values.id,"text/html");var isValue=isCount.body.firstElementChild.innerHTML;function isStatus(e){switch(e){case"Active":return'<span class="badge bg-success-subtle text-success ">'+e+"</span>";case"Inactive":return'<span class="badge bg-danger-subtle text-danger ">'+e+"</span>"}}function clearFields(){userNameField.value="",emailField.value="",dateField.value="",accountStatusField.value="",accountStatusVal&&accountStatusVal.destroy(),accountStatusVal=new Choices(accountStatusField),document.getElementById("users-img-field").src="../assets/images/users/user-dummy-img.jpg",document.getElementById("users-image-input").value=""}document.getElementById("showModal").addEventListener("hidden.bs.modal",(function(){clearFields()})),document.querySelector(".pagination-next").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").nextElementSibling.children[0].click())})),document.querySelector(".pagination-prev").addEventListener("click",(function(){document.querySelector(".pagination.listjs-pagination")&&(document.querySelector(".pagination.listjs-pagination").querySelector(".active")&&document.querySelector(".pagination.listjs-pagination").querySelector(".active").previousSibling.children[0].click())})),document.querySelector("#users-image-input").addEventListener("change",(function(){var e=document.querySelector("#users-img-field"),t=document.querySelector("#users-image-input").files[0],s=new FileReader;s.addEventListener("load",(function(){e.src=s.result}),!1),t&&s.readAsDataURL(t)}));